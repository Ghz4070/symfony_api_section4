# Generated by Okty.io
version: "3.6"
services:
    php-fpm:
        build: docker/php
        volumes:
            - "./:/usr/share/nginx/html"
        restart: always

    nginx:
        build: docker/nginx
        ports:
            - "80:80"
        volumes:
            - "./:/usr/share/nginx/html"
        restart: always

    # docker-compose run composer require api // par exemple
    composer:
        image: 'composer:1.8'
        command: install
        volumes:
            - './:/app'

    phpmyadmin:
        image: phpmyadmin/phpmyadmin
        environment:
            - PMA_ARBITRARY=1
            - PMA_HOST=database
            - PMA_USER=root
            - PMA_PASSWORD=root
        ports:
            - '8080:80'
        depends_on:
            - database
        volumes:
            - ./docker/phpmyadmin/phpmyadmin-misc.ini:/usr/local/etc/php/conf.d/phpmyadmin-misc.ini
        restart: always

    mailhog:
        image: mailhog/mailhog
        ports:
            - "8025:8025"

    database:
        image: mariadb:10.3
        volumes:
            - ./docker/sql:/var/lib/mysql
        ports:
            - "3306:3306"
        environment:
            - MYSQL_DATABASE=symfonyweb
            - MYSQL_ROOT_PASSWORD=root
            - TZ=Europe/Paris
        restart: always